# Google Calendar Peering (GAS Edition)

仕事（Work）と家庭（Home）、2つの独立したGoogleカレンダーを相互接続（Peering）し、最適なワークライフバランスを実現するGoogle Apps Script (GAS) ツールです。
サーバー不要、完全無料で動作し、プライバシーに配慮した設計になっています。

## 🎯 コンセプト - Why "Peering"?

本ツールが「Sync（同期）」ではなく**「Peering（ピアリング）」**を名乗るのには理由があります。

インターネットにおけるピアリングが「異なるネットワーク同士が必要な経路情報のみを交換する」ように、このツールは**仕事と家庭という異なる領域（ドメイン）の独立性を保ったまま、必要な「空き時間」と「予定」のみを相互に広報（Advertise）します。**

単なるデータの複製（ミラーリング）ではなく、互いの領域を尊重するロジックでワークライフバランスを支援します。

* **Work domain → Home domain:**
    * **広報内容:** 家族との時間が確保できる「休日・祝日」の情報。
    * **目的:** 仕事の予定で埋まりがちなカレンダーの中に、家族と過ごせる「空白」を明確化します。

* **Home domain → Work domain:**
    * **広報内容:** 平日の通院や役所手続きなど、どうしても外せない「私用（ブロック）」の情報。
    * **目的:** 具体的な内容は隠蔽（Mask）したまま「休暇」としてブロックし、職場からの会議設定を防ぎます。

## 🚀 特徴

* **完全無料 & サーバーレス:** Google Apps Script (GAS) だけで完結し、常時稼働サーバーは不要です。
* **Work -> Home (共有):** 仕事カレンダーにある休日の出勤やイベントを、自動で家庭カレンダーへ連携します。
* **Home -> Work (ブロック):** 家庭カレンダーにある平日の私用を、仕事カレンダーへ「休暇」としてブロックします。内容は表示されません。
* **Discord通知:** ピアリング（変更）が発生した時だけDiscordにログを通知します。
* **無限ループ防止:** ボットが作成した経路（予定）を識別し、ループを防ぎます。

## 🛠 セットアップ

### 1. プロジェクトの作成
Google Apps Script プロジェクトを新規作成するか、`clasp` でローカルに clone してください。

### 2. コードのデプロイ
`Code.js` の内容をコピー＆ペーストするか、push してください。

### 3. スクリプトプロパティの設定
GASエディタの「プロジェクトの設定」>「スクリプト プロパティ」に以下を設定します。

| プロパティ名 | 説明 | 例 |
| --- | --- | --- |
| `WORK_CALENDAR_ID` | 仕事のカレンダーID | `user@company.com` |
| `HOME_CALENDAR_ID` | 家庭のカレンダーID | `user@gmail.com` |
| `DISCORD_WEBHOOK_URL` | DiscordのWebhook URL | `https://discord.com/api/...` |
| `SYNC_DAYS` | 連携する期間（日数） | `30` |
| `WEEKEND_DAYS` | 週末とみなす曜日（0=日, 6=土） | `0,6` |

### 4. トリガー設定
GASのトリガー設定画面で、`main` 関数を「時間主導型（例: 15分おき）」で設定してください。

## ⚠️ 前提条件
* 接続したい2つのカレンダーアカウント間で、**相互に「予定の変更権限」** の共有設定が必要です。

## License
MIT
